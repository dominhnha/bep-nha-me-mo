"use strict";(self.webpackChunkbep_nha_me_mo=self.webpackChunkbep_nha_me_mo||[]).push([[483],{7169:function(e,n,r){r.d(n,{Z:function(){return t}});r(2791);var s=r(184),t=function(e){return(0,s.jsx)("div",{class:"sea",children:(0,s.jsxs)("div",{class:"circle-wrapper",children:[(0,s.jsx)("div",{class:"bubble"}),(0,s.jsxs)("div",{class:"submarine-wrapper",children:[(0,s.jsxs)("div",{class:"submarine-body",children:[(0,s.jsx)("div",{class:"window"}),(0,s.jsx)("div",{class:"engine"}),(0,s.jsx)("div",{class:"light"})]}),(0,s.jsx)("div",{class:"helix"}),(0,s.jsx)("div",{class:"hat",children:(0,s.jsxs)("div",{class:"leds-wrapper",children:[(0,s.jsx)("div",{class:"periscope"}),(0,s.jsx)("div",{class:"leds"})]})})]})]})})}},7190:function(e,n,r){r.d(n,{Z:function(){return t}});r(2791);var s=r(184),t=function(e){return(0,s.jsx)("button",{class:"Button",onClick:e.onClick?function(n){return e.onClick(n)}:null,children:e.children})}},4946:function(e,n,r){r(2791);var s=r(5493),t=r(184);n.Z=function(e){var n=e.onChange,r=e.options,a=e.value,i=e.className,c=e.placeholder;return(0,t.jsx)("div",{className:i,children:(0,t.jsx)(s.ZP,{value:function(e,n){return e?e.find((function(e){return e.value===n})):""}(r,a),placeholder:c,onChange:function(e){n(e)},options:r})})}},3483:function(e,n,r){r.r(n),r.d(n,{default:function(){return C}});var s=r(4165),t=r(5861),a=r(885),i=r(2791),c=r(5705),u=r(1724),l=r(6473),o=r(4946),d=r(6417),h=r(4261),m=r(7169),p=r(7689),x=r(1087),v=r(1613),y=r(7190),g=r(9085),b=r(6622),f=r(6235),P=r(1088),N=r(3587),_=r(6660),j=r(184),k=[{value:"advance",label:"Thanh to\xe1n tr\u01b0\u1edbc khi nh\u1eadn h\xe0ng"},{value:"later",label:"Thanh to\xe1n sau khi nh\u1eadn h\xe0ng"}],Z=/^((\\+[1-9]{1,4}[ \\-]*)|(\\([0-9]{2,3}\\)[ \\-]*)|([0-9]{2,4})[ \\-]*)*?[0-9]{3,4}?[ \\-]*[0-9]{3,4}?$/,C=function(e){var n=(0,i.useContext)(d.L),r=n.Payment,C=(n.Paymentdispatch,(0,i.useContext)(P.A)),w=(C.Cart,C.Cartdispatch),O=(0,i.useContext)(b.V),U=O.Authur,A=(O.dispatch,(0,i.useState)(0)),J=(0,a.Z)(A,2),B=J[0],F=J[1],T=(0,p.s0)();(0,i.useEffect)((function(){if(1==r.success&&r.payload.length>0){var e=0;r.payload.map((function(n){var r=Number(n.Price)*Number(n.Quantity);e+=r})),F(e)}}),[r]),console.log("",U),console.log("ssssssssssssss",r);var q=(0,c.TA)({enableReinitialize:!0,initialValues:{emailOrPhoneNumber:1==U.success?U.payload.user.Number:"",address:1==U.success?U.payload.user.Address:"",delivery:"",voucher:""},validationSchema:u.Ry({emailOrPhoneNumber:u.Z_().required("Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i").matches(Z,"Vui l\xf2ng nh\u1eadp s\u1ed1 \u0111i\u1ec7n tho\u1ea1i").min(9,"\xedt nh\u1ea5t l\xe0 10 s\u1ed1").max(11,"nhi\u1ec1u nh\u1ea5p l\xe0 10 s\u1ed1 "),address:u.Z_().required("\u0110\u1ecba ch\u1ec9 kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng"),delivery:u.Z_().required("Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng")}),onSubmit:(0,i.useCallback)(function(){var e=(0,t.Z)((0,s.Z)().mark((function e(n){var t,a,i,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,console.log(n.emailOrPhoneNumber,n.address,n.delivery),t=0,a=r.payload.map((function(e){var n=Number(e.Price)*Number(e.Quantity);return t+=n,{pid:e.Pid,quantity:Number(e.Quantity)}})),i=0,""==n.voucher.trim()){e.next=12;break}return e.next=8,(0,_.kN)(n.voucher.trim());case 8:if(0!=(i=e.sent)){e.next=12;break}return g.Am.error("M\xe3 gi\u1ea3m gi\xe1 kh\xf4ng h\u1ee3p l\u1ec7",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),e.abrupt("return");case 12:if(t*=1-i,1!=U.success||1!=r.success){e.next=19;break}return console.log("s",U.payload.uid,{emailOrPhone:n.emailOrPhoneNumber,Address:n.address,Total:t,PriceDiscount:i,FullName:U.payload.user.FullName,Payments:n.delivery},a),e.next=17,(0,f.Cw)(U.payload.uid,!0,{emailOrPhone:n.emailOrPhoneNumber,Address:n.address,Total:t,PriceDiscount:i,FullName:U.payload.user.FullName,Payments:n.delivery},a);case 17:e.next=22;break;case 19:return c=(0,h.Z)(),e.next=22,(0,f.Cw)(c,!1,{emailOrPhone:"".concat(n.emailOrPhoneNumber),Address:n.address,Total:t,PriceDiscount:i,FullName:c,Payments:n.delivery},a);case 22:r.payload.map((function(e){w({type:N.Tc,payload:e.Pid})})),g.Am.success("\ud83e\udd84 Mua h\xe0ng th\xe0nh c\xf4ng!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),T("/"),console.log(r.payload),e.next=32;break;case 28:e.prev=28,e.t0=e.catch(0),console.log(e.t0),g.Am.error("\u0110\xe3 x\u1ea3y ra l\u1ed7i vui l\xf2ng th\u1eed l\u1ea1i",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"});case 32:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(n){return e.apply(this,arguments)}}(),[r])});return(0,j.jsx)("div",{className:"Payment",children:(0,j.jsxs)("div",{className:"container Payment__container",children:[(0,j.jsxs)("div",{className:"Payment__infomation",children:[(0,j.jsxs)(l.ZP,{children:[(0,j.jsx)(l.NZ,{children:"Th\xf4ng tin kh\xe1ch h\xe0ng"}),(0,j.jsxs)("form",{action:"",children:[(0,j.jsxs)("div",{className:"Payment__group input-container border--active",children:[(0,j.jsx)("input",{id:"emailOrPhoneNumber",name:"emailOrPhoneNumber",type:"number",max:"999999999999",onChange:q.handleChange,onBlur:q.handleBlur,value:q.values.emailOrPhoneNumber,required:!0}),(0,j.jsx)("label",{children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),q.touched.emailOrPhoneNumber&&q.errors.emailOrPhoneNumber?(0,j.jsx)("p",{className:"error-message",children:q.errors.emailOrPhoneNumber}):null]}),(0,j.jsxs)("div",{className:" Payment__group input-container border--active",children:[(0,j.jsx)("input",{id:"address",name:"address",type:"text",onChange:q.handleChange,onBlur:q.handleBlur,value:q.values.address,required:!0}),(0,j.jsx)("label",{children:"\u0110\u1ecba Ch\u1ec9"}),q.touched.address&&q.errors.address?(0,j.jsx)("p",{className:"error-message",children:q.errors.address}):null]}),(0,j.jsxs)("div",{className:"Payment__group input-container",children:[(0,j.jsx)(o.Z,{className:"input",onChange:function(e){return q.setFieldValue("delivery",e.value)},value:q.values.delivery,options:k,placeholder:"H\xecnh th\u1ee9c th\xe1nh to\xe1n"}),q.touched.delivery&&q.errors.delivery?(0,j.jsx)("p",{className:"error-message active__error__xl",children:q.errors.delivery}):null]})]})]}),(0,j.jsxs)(l.ZP,{children:[(0,j.jsx)(l.NZ,{children:"M\xe3 gi\u1ea3m gi\xe1 "}),(0,j.jsxs)("div",{className:"Payment__group input-container border--active",children:[(0,j.jsx)("input",{id:"voucher",name:"voucher",type:"text",onChange:q.handleChange,onBlur:q.handleBlur,value:q.values.voucher,required:!0}),(0,j.jsx)("label",{children:"Nh\u1eadp m\xe3 gi\u1ea3m gi\xe1 \u0111\u1ec3 \u0111\u01b0\u1ee3c \u01b0u \u0111\xe3i nh\xe9 "})]})]})]}),(0,j.jsx)("div",{className:"Payment__Product",children:(0,j.jsxs)(l.ZP,{children:[(0,j.jsx)(l.NZ,{children:" H\xf3a \u0111\u01a1n s\u1ea3n ph\u1ea9m"}),(0,j.jsx)(l.tr,{children:1==r.success&&r.payload.length>0?(0,j.jsx)("div",{className:"Payment__Product__list",children:r.payload.map((function(e){var n=(0,v.u)(Number(e.Price)*Number(e.Quantity));return(0,j.jsxs)("div",{className:"Payment__Product__item",children:[(0,j.jsxs)("div",{className:"Payment__Product__wrapper",children:[(0,j.jsx)("div",{className:"Payment__Product__img",children:(0,j.jsx)("img",{src:e.Image[0],alt:""})}),(0,j.jsxs)("div",{className:"Payment__Product__content",children:[(0,j.jsx)("h2",{children:e.NameProduct}),(0,j.jsxs)("p",{children:["S\u1ed1 l\u01b0\u1ee3ng: ",e.Quantity]})]})]}),(0,j.jsx)("div",{className:"Payment__Product__price",children:(0,j.jsxs)("p",{children:[(0,v.u)(n),"\u20ab"]})})]})}))}):(0,j.jsxs)("div",{className:"Payment__Product__404",children:[(0,j.jsx)(m.Z,{}),(0,j.jsx)("h2",{children:"R\u1ea5t ti\u1ebfc b\u1ea1n ch\u01b0a ch\u1ecdn s\u1ea3n ph\u1ea9m \u0111\u1ec3 thanh to\xe1n "}),(0,j.jsx)(x.rU,{to:"/Account/Cart",children:"C\xf9ng quay l\u1ea1i gi\u1ecf h\xe0ng nh\xe9 !"})]})}),(0,j.jsx)(l.NZ,{children:(0,j.jsxs)("div",{className:"Payment__total",children:[(0,j.jsxs)("div",{className:"Payment__total__warpper",children:[(0,j.jsx)("h2",{children:"T\u1ed5ng ti\u1ec1n"}),(0,j.jsxs)("span",{children:[(0,v.u)(B),"\u20ab"]})]}),(0,j.jsx)("div",{className:"Payment__total__button",onClick:q.handleSubmit,children:(0,j.jsx)(y.Z,{children:"Mua Ngay"})})]})})]})})]})})}},6235:function(e,n,r){r.d(n,{Cw:function(){return p},eJ:function(){return d},Nn:function(){return h},Rl:function(){return m}});var s=r(4165),t=r(5861),a=r(5171),i=r(6724),c=(r(5854),r(408),r(9342)),u=(r(6660),"PurchaseHistory"),l=function(){var e=(0,t.Z)((0,s.Z)().mark((function e(n,r,t){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(0,i.hJ)(a.db,u),e.next=3,(0,i.pl)((0,i.JU)(a.db,"PurchaseHistory",r),t);case 3:return e.sent,e.next=6,(0,i.r7)((0,i.JU)(a.db,"PurchaseHistory",r),{Uid:n});case 6:case"end":return e.stop()}}),e)})));return function(n,r,s){return e.apply(this,arguments)}}(),o="User",d=function(){var e=(0,t.Z)((0,s.Z)().mark((function e(n,r){var t,c,u,l;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.Email,c=r.firstname,u=r.lastname,l={Email:t,Address:"",Number:"",ImgUser:"https://mir-s3-cdn-cf.behance.net/project_modules/max_1200/36015793570193.5e6c1151cb04b.png",FullName:"".concat(c," ").concat(u),Birthdate:"",Role:"user"},e.next=4,(0,i.pl)((0,i.JU)(a.db,o,n),l).then((function(e){return{success:!0,payload:null}})).catch((function(e){return{success:!1,payload:e}}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),h=function(){var e=(0,t.Z)((0,s.Z)().mark((function e(n){var r,t;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,i.JU)(a.db,o,n),e.next=3,(0,i.QT)(r);case 3:if(!(t=e.sent).exists()){e.next=8;break}return e.abrupt("return",{success:!0,payload:t.data()});case 8:return e.abrupt("return",{success:!1,payload:"No such document!"});case 9:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),m=function(){var e=(0,t.Z)((0,s.Z)().mark((function e(n,r){var t,c,u,l,d,h,m;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.Email,c=r.Address,u=r.Number,l=r.ImgUser,d=r.FullName,h=r.Birthdate,console.log(t),m=(0,i.JU)(a.db,o,n),e.next=5,(0,i.r7)(m,{Email:t,Address:c,Number:u,ImgUser:l,FullName:d,Birthdate:i.EK.fromDate(new Date(h)),Role:"User"}).then((function(e){return{success:!0,payload:r}})).catch((function(e){return{success:!1,payload:e}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(n,r){return e.apply(this,arguments)}}(),p=function(){var e=(0,t.Z)((0,s.Z)().mark((function e(n,r,t){var u,d,h,m,p,x,v,y,g,b,f,P,N,_,j,k,Z,C,w,O,U=arguments;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(u=U.length>3&&void 0!==U[3]?U[3]:[{pid:"",quantity:""}],d=t.emailOrPhone,h=t.Address,m=t.Payments,p=t.Total,x=t.PriceDiscount,v=t.FullName,y={Item:u,Discount:x,Total:p,DayPurchased:(0,i.Bt)(),Address:h,Payments:m,FullName:v,Email:d,Status:"Pending"},!0!==r){e.next=26;break}return g=(0,i.JU)(a.db,o,n),b=(0,i.hJ)(g,"PurchaseHistoryForUser"),e.next=8,(0,i.ET)(b,y);case 8:f=e.sent,P=0;case 10:if(!(P<u.length)){e.next=22;break}return N=(0,i.JU)(a.db,"Product",u[P].pid),e.next=14,(0,c.CR)(u[P].pid);case 14:return _=e.sent,e.next=17,(0,i.r7)(N,{Quantity:(_-u[P].quantity).toString()});case 17:return e.next=19,(0,c.cF)(u[P].pid,u[P].quantity);case 19:P++,e.next=10;break;case 22:return e.next=24,l(n,f.id,y);case 24:e.next=48;break;case 26:return j=(0,i.hJ)(a.db,"PurchaseHistory"),e.next=29,(0,i.ET)(j,y);case 29:return k=e.sent,e.next=32,(0,i.JU)(a.db,"PurchaseHistory",k.id);case 32:Z=e.sent,C=0;case 34:if(!(C<u.length)){e.next=46;break}return w=(0,i.JU)(a.db,"Product",u[C].pid),e.next=38,(0,c.CR)(u[C].pid);case 38:return O=e.sent,e.next=41,(0,i.r7)(w,{Quantity:(O-u[C].quantity).toString()});case 41:return e.next=43,(0,c.cF)(u[C].pid,u[C].quantity);case 43:C++,e.next=34;break;case 46:return e.next=48,(0,i.r7)(Z,{Uid:n});case 48:case"end":return e.stop()}}),e)})));return function(n,r,s){return e.apply(this,arguments)}}()},1613:function(e,n,r){function s(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}function t(e){return JSON.stringify(e).slice(1,11)}r.d(n,{J:function(){return t},u:function(){return s}})}}]);
//# sourceMappingURL=483.35228c1a.chunk.js.map