"use strict";(self.webpackChunkbep_nha_me_mo=self.webpackChunkbep_nha_me_mo||[]).push([[944],{4944:function(e,r,n){n.r(r),n.d(r,{default:function(){return f}});var t=n(4165),a=n(5861),s=n(2791),u=n(5705),c=n(1724),i=n(7689),o=n(1087),l=n(79),d=n(6622),p=n(6235),h=n(3587),m=n(184),f=function(e){var r=(0,i.s0)(),n=(0,s.useContext)(d.V),f=n.Authur,b=n.dispatch,x=(0,u.TA)({initialValues:{emailOrPhoneNumber:"",password:""},validationSchema:c.Ry({emailOrPhoneNumber:c.Z_().max(254,"Email ho\u1eb7c s\u1ed1 \u0111i\u1ec7n tho\u1ea1i b\u1ea1n nh\u1eadp ph\u1ea3i \xedt h\u01a1n 254 k\xed t\u1ef1").required("Email / S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng"),password:c.Z_().required("M\u1eadt kh\u1ea9u kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng")}),onSubmit:function(){var e=(0,a.Z)((0,t.Z)().mark((function e(n){var a,s,u,c;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=n.emailOrPhoneNumber,s=n.password,e.next=4,(0,l.vs)({email:a,password:s});case 4:if(u=e.sent,console.log(u.payload),!u.success){e.next=13;break}return e.next=9,(0,p.Nn)(u.payload.uid);case 9:(c=e.sent).success?(b({type:h.kk,payload:{user:{uid:u.payload.uid,user:c.payload}}}),r("/")):r("/404"),e.next=14;break;case 13:r("/404");case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),r("/404");case 19:console.log(f);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})));return function(r){return e.apply(this,arguments)}}()});return(0,m.jsx)("div",{className:"center",children:(0,m.jsxs)("form",{className:"sign-in-form",onSubmit:x.handleSubmit,children:[(0,m.jsx)("h1",{children:"\u0110\u0103ng Nh\u1eadp"}),(0,m.jsxs)("div",{class:"tabs",children:[(0,m.jsx)("div",{class:"tab-item active",children:"\u0110\u0103ng nh\u1eadp"}),(0,m.jsx)(o.rU,{to:"/Account/SignUp",className:"tab-item",children:"\u0110\u0103ng k\xfd"})]}),(0,m.jsxs)("div",{className:"input-container",children:[(0,m.jsx)("input",{id:"emailOrPhoneNumber",name:"emailOrPhoneNumber",type:"text",onChange:x.handleChange,onBlur:x.handleBlur,value:x.values.emailOrPhoneNumber,required:!0}),(0,m.jsx)("label",{className:"border-null",children:"Email / S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),x.touched.emailOrPhoneNumber&&x.errors.emailOrPhoneNumber?(0,m.jsx)("p",{className:"error-message active",children:x.errors.emailOrPhoneNumber}):null]}),(0,m.jsxs)("div",{className:"input-container",children:[(0,m.jsx)("input",{id:"password",name:"password",type:"password",onChange:x.handleChange,onBlur:x.handleBlur,value:x.values.password,required:!0}),x.touched.password&&x.errors.password?(0,m.jsx)("p",{className:"error-message  active",children:x.errors.password}):null,(0,m.jsx)("label",{className:"border-null",children:"M\u1eadt Kh\u1ea9u"})]}),(0,m.jsx)("button",{type:"submit",children:"\u0110\u0103ng Nh\u1eadp"}),(0,m.jsx)("div",{className:"forget-password",children:(0,m.jsx)("a",{href:"#",children:"B\u1ea1n qu\xean m\u1eadt kh\u1ea9u?"})})]})})}},79:function(e,r,n){n.d(r,{Sb:function(){return c},lv:function(){return o},vs:function(){return i}});var t=n(4165),a=n(5861),s=n(4116),u=n(5171),c=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n,a,c;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=r.email,a=r.password,e.next=4,(0,s.Xb)(u.I8,n,a).then((function(e){return{success:!0,payload:e.user.uid}})).catch((function(e){return{success:!1,payload:e}}));case 4:return c=e.sent,e.abrupt("return",c);case 8:return e.prev=8,e.t0=e.catch(0),e.abrupt("return",{success:!1,payload:e.t0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(r){return e.apply(this,arguments)}}(),i=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n,a,c;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.email,a=r.password,e.next=3,(0,s.e5)(u.I8,n,a).then((function(e){return{success:!0,payload:e.user}})).catch((function(e){return{success:!1,payload:e}}));case 3:return c=e.sent,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),o=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(){return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(0,s.w7)(u.I8).then((function(){return{success:!0,payload:"Sign-out successful"}})).catch((function(e){return{success:!1,payload:e}}));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},6235:function(e,r,n){n.d(r,{Cw:function(){return h},eJ:function(){return l},Nn:function(){return d},Rl:function(){return p}});var t=n(4165),a=n(5861),s=n(5171),u=n(6724),c=(n(5854),n(408),n(9342)),i=(n(6660),function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r,n,a){var c,i,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=(0,u.hJ)(s.db,"PurchaseHistory"),e.next=3,(0,u.ET)(c,a);case 3:return i=e.sent,e.next=6,(0,u.JU)(s.db,"PurchaseHistory",i.id);case 6:return o=e.sent,e.next=9,(0,u.r7)(o,{Uid:r});case 9:case"end":return e.stop()}}),e)})));return function(r,n,t){return e.apply(this,arguments)}}()),o="User",l=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r,n){var a,c,i,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.Email,c=n.firstname,i=n.lastname,l={Email:a,Address:"",Number:"",ImgUser:"https://mir-s3-cdn-cf.behance.net/project_modules/max_1200/36015793570193.5e6c1151cb04b.png",FullName:"".concat(c," ").concat(i),Birthdate:"",Role:"user"},e.next=4,(0,u.pl)((0,u.JU)(s.db,o,r),l).then((function(e){return{success:!0,payload:null}})).catch((function(e){return{success:!1,payload:e}}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),d=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r){var n,a;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,u.JU)(s.db,o,r),e.next=3,(0,u.QT)(n);case 3:if(!(a=e.sent).exists()){e.next=8;break}return e.abrupt("return",{success:!0,payload:a.data()});case 8:return e.abrupt("return",{success:!1,payload:"No such document!"});case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),p=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r,n){var a,c,i,l,d,p,h;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n.Email,c=n.Address,i=n.Number,l=n.ImgUser,d=n.FullName,p=n.Birthdate,console.log(a),h=(0,u.JU)(s.db,o,r),e.next=5,(0,u.r7)(h,{Email:a,Address:c,Number:i,ImgUser:l,FullName:d,Birthdate:u.EK.fromDate(new Date(p)),Role:"User"}).then((function(e){return{success:!0,payload:n}})).catch((function(e){return{success:!1,payload:e}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),h=function(){var e=(0,a.Z)((0,t.Z)().mark((function e(r,n,a){var l,d,p,h,m,f,b,x,v,y,w,N,k,g,Z,P,j,U,E,J,S=arguments;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(l=S.length>3&&void 0!==S[3]?S[3]:[{pid:"",quantity:""}],d=a.emailOrPhone,p=a.Address,h=a.Payments,m=a.Total,f=a.PriceDiscount,b=a.FullName,x={Item:l,Discount:f,Total:m,DayPurchased:(0,u.Bt)(),Address:p,Payments:h,FullName:b,Email:d},!0!==n){e.next=26;break}return v=(0,u.JU)(s.db,o,r),y=(0,u.hJ)(v,"PurchaseHistoryForUser"),e.next=8,(0,u.ET)(y,x);case 8:w=e.sent,N=0;case 10:if(!(N<l.length)){e.next=22;break}return k=(0,u.JU)(s.db,"Product",l[N].pid),e.next=14,(0,c.CR)(l[N].pid);case 14:return g=e.sent,e.next=17,(0,u.r7)(k,{Quantity:(g-l[N].quantity).toString()});case 17:return e.next=19,(0,c.cF)(l[N].pid,l[N].quantity);case 19:N++,e.next=10;break;case 22:return e.next=24,i(r,w.id,x);case 24:e.next=48;break;case 26:return Z=(0,u.hJ)(s.db,"PurchaseHistory"),e.next=29,(0,u.ET)(Z,x);case 29:return P=e.sent,e.next=32,(0,u.JU)(s.db,"PurchaseHistory",P.id);case 32:j=e.sent,U=0;case 34:if(!(U<l.length)){e.next=46;break}return E=(0,u.JU)(s.db,"Product",l[U].pid),e.next=38,(0,c.CR)(l[U].pid);case 38:return J=e.sent,e.next=41,(0,u.r7)(E,{Quantity:(J-l[U].quantity).toString()});case 41:return e.next=43,(0,c.cF)(l[U].pid,l[U].quantity);case 43:U++,e.next=34;break;case 46:return e.next=48,(0,u.r7)(j,{Uid:r});case 48:case"end":return e.stop()}}),e)})));return function(r,n,t){return e.apply(this,arguments)}}()}}]);
//# sourceMappingURL=944.4566cde7.chunk.js.map