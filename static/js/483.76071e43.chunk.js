"use strict";(self.webpackChunkbep_nha_me_mo=self.webpackChunkbep_nha_me_mo||[]).push([[483],{7169:function(e,r,n){n.d(r,{Z:function(){return s}});n(2791);var t=n(184),s=function(e){return(0,t.jsx)("div",{class:"sea",children:(0,t.jsxs)("div",{class:"circle-wrapper",children:[(0,t.jsx)("div",{class:"bubble"}),(0,t.jsxs)("div",{class:"submarine-wrapper",children:[(0,t.jsxs)("div",{class:"submarine-body",children:[(0,t.jsx)("div",{class:"window"}),(0,t.jsx)("div",{class:"engine"}),(0,t.jsx)("div",{class:"light"})]}),(0,t.jsx)("div",{class:"helix"}),(0,t.jsx)("div",{class:"hat",children:(0,t.jsxs)("div",{class:"leds-wrapper",children:[(0,t.jsx)("div",{class:"periscope"}),(0,t.jsx)("div",{class:"leds"})]})})]})]})})}},7190:function(e,r,n){n.d(r,{Z:function(){return s}});n(2791);var t=n(184),s=function(e){return(0,t.jsx)("button",{class:"Button",onClick:e.onClick?function(r){return e.onClick(r)}:null,children:e.children})}},4946:function(e,r,n){n(2791);var t=n(5493),s=n(184);r.Z=function(e){var r=e.onChange,n=e.options,a=e.value,i=e.className,c=e.placeholder;return(0,s.jsx)("div",{className:i,children:(0,s.jsx)(t.ZP,{value:function(e,r){return e?e.find((function(e){return e.value===r})):""}(n,a),placeholder:c,onChange:function(e){r(e)},options:n})})}},3483:function(e,r,n){n.r(r),n.d(r,{default:function(){return Z}});var t=n(4165),s=n(5861),a=n(885),i=n(2791),c=n(5705),u=n(1724),l=n(6473),o=n(4946),d=n(6417),h=n(4261),m=n(7169),p=n(7689),x=n(1087),v=n(1613),y=n(7190),g=n(9085),b=n(6622),f=n(6235),P=n(1088),N=n(3587),_=n(6660),j=n(184),k=[{value:"advance",label:"Thanh to\xe1n tr\u01b0\u1edbc khi nh\u1eadn h\xe0ng"},{value:"later",label:"Thanh to\xe1n sau khi nh\u1eadn h\xe0ng"}],Z=function(e){var r=(0,i.useContext)(d.L),n=r.Payment,Z=(r.Paymentdispatch,(0,i.useContext)(P.A)),C=(Z.Cart,Z.Cartdispatch),w=(0,i.useContext)(b.V),O=w.Authur,U=(w.dispatch,(0,i.useState)(0)),A=(0,a.Z)(U,2),T=A[0],B=A[1],F=(0,p.s0)();(0,i.useEffect)((function(){if(1==n.success&&n.payload.length>0){var e=0;n.payload.map((function(r){var n=Number(r.Price)*Number(r.Quantity);e+=n})),B(e)}}),[n]),console.log("",O),console.log("ssssssssssssss",n);var J=(0,c.TA)({enableReinitialize:!0,initialValues:{emailOrPhoneNumber:1==O.success?O.payload.user.Number:"",address:1==O.success?O.payload.user.Address:"",delivery:"",voucher:""},validationSchema:u.Ry({emailOrPhoneNumber:u.Z_().max(254,"Email ho\u1eb7c s\u1ed1 \u0111i\u1ec7n tho\u1ea1i b\u1ea1n nh\u1eadp ph\u1ea3i \xedt h\u01a1n 254 k\xed t\u1ef1").required("Email / S\u1ed1 \u0111i\u1ec7n tho\u1ea1i kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng"),address:u.Z_().required("\u0110\u1ecba ch\u1ec9 kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng"),delivery:u.Z_().required("Ph\u01b0\u01a1ng th\u1ee9c thanh to\xe1n kh\xf4ng \u0111\u01b0\u1ee3c b\u1ecf tr\u1ed1ng")}),onSubmit:(0,i.useCallback)(function(){var e=(0,s.Z)((0,t.Z)().mark((function e(r){var s,a,i,c;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,console.log(r.emailOrPhoneNumber,r.address,r.delivery),s=0,a=n.payload.map((function(e){var r=Number(e.Price)*Number(e.Quantity);return s+=r,{pid:e.Pid,quantity:Number(e.Quantity)}})),i=0,""==r.voucher.trim()){e.next=12;break}return e.next=8,(0,_.kN)(r.voucher.trim());case 8:if(0!=(i=e.sent)){e.next=12;break}return g.Am.error("M\xe3 gi\u1ea3m gi\xe1 kh\xf4ng h\u1ee3p l\u1ec7",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),e.abrupt("return");case 12:if(s*=1-i,1!=O.success||1!=n.success){e.next=19;break}return console.log("s",O.payload.uid,{emailOrPhone:r.emailOrPhoneNumber,Address:r.address,Total:s,PriceDiscount:i,FullName:O.payload.user.FullName,Payments:r.delivery},a),e.next=17,(0,f.Cw)(O.payload.uid,!0,{emailOrPhone:r.emailOrPhoneNumber,Address:r.address,Total:s,PriceDiscount:i,FullName:O.payload.user.FullName,Payments:r.delivery},a);case 17:e.next=22;break;case 19:return c=(0,h.Z)(),e.next=22,(0,f.Cw)(c,!1,{emailOrPhone:r.emailOrPhoneNumber,Address:r.address,Total:s,PriceDiscount:i,FullName:c,Payments:r.delivery},a);case 22:n.payload.map((function(e){C({type:N.Tc,payload:e.Pid})})),g.Am.success("\ud83e\udd84 Mua h\xe0ng th\xe0nh c\xf4ng!",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"}),F("/"),console.log(n.payload),e.next=32;break;case 28:e.prev=28,e.t0=e.catch(0),console.log(e.t0),g.Am.error("\u0110\xe3 x\u1ea3y ra l\u1ed7i vui l\xf2ng th\u1eed l\u1ea1i",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0,theme:"light"});case 32:case"end":return e.stop()}}),e,null,[[0,28]])})));return function(r){return e.apply(this,arguments)}}(),[n])});return(0,j.jsx)("div",{className:"Payment",children:(0,j.jsxs)("div",{className:"container Payment__container",children:[(0,j.jsxs)("div",{className:"Payment__infomation",children:[(0,j.jsxs)(l.ZP,{children:[(0,j.jsx)(l.NZ,{children:"Th\xf4ng tin kh\xe1ch h\xe0ng"}),(0,j.jsxs)("form",{action:"",children:[(0,j.jsxs)("div",{className:"Payment__group input-container border--active",children:[(0,j.jsx)("input",{id:"emailOrPhoneNumber",name:"emailOrPhoneNumber",type:"text",onChange:J.handleChange,onBlur:J.handleBlur,value:J.values.emailOrPhoneNumber,required:!0}),(0,j.jsx)("label",{children:"S\u1ed1 \u0111i\u1ec7n tho\u1ea1i"}),J.touched.emailOrPhoneNumber&&J.errors.emailOrPhoneNumber?(0,j.jsx)("p",{className:"error-message",children:J.errors.emailOrPhoneNumber}):null]}),(0,j.jsxs)("div",{className:" Payment__group input-container border--active",children:[(0,j.jsx)("input",{id:"address",name:"address",type:"text",onChange:J.handleChange,onBlur:J.handleBlur,value:J.values.address,required:!0}),(0,j.jsx)("label",{children:"\u0110\u1ecba Ch\u1ec9"}),J.touched.address&&J.errors.address?(0,j.jsx)("p",{className:"error-message",children:J.errors.address}):null]}),(0,j.jsxs)("div",{className:"Payment__group input-container",children:[(0,j.jsx)(o.Z,{className:"input",onChange:function(e){return J.setFieldValue("delivery",e.value)},value:J.values.delivery,options:k,placeholder:"H\xecnh th\u1ee9c th\xe1nh to\xe1n"}),J.touched.delivery&&J.errors.delivery?(0,j.jsx)("p",{className:"error-message active__error__xl",children:J.errors.delivery}):null]})]})]}),(0,j.jsxs)(l.ZP,{children:[(0,j.jsx)(l.NZ,{children:"M\xe3 gi\u1ea3m gi\xe1 "}),(0,j.jsxs)("div",{className:"Payment__group input-container border--active",children:[(0,j.jsx)("input",{id:"voucher",name:"voucher",type:"text",onChange:J.handleChange,onBlur:J.handleBlur,value:J.values.voucher,required:!0}),(0,j.jsx)("label",{children:"Nh\u1eadp m\xe3 gi\u1ea3m gi\xe1 \u0111\u1ec3 \u0111\u01b0\u1ee3c \u01b0u \u0111\xe3i nh\xe9 "})]})]})]}),(0,j.jsx)("div",{className:"Payment__Product",children:(0,j.jsxs)(l.ZP,{children:[(0,j.jsx)(l.NZ,{children:" H\xf3a \u0111\u01a1n s\u1ea3n ph\u1ea9m"}),(0,j.jsx)(l.tr,{children:1==n.success&&n.payload.length>0?(0,j.jsx)("div",{className:"Payment__Product__list",children:n.payload.map((function(e){var r=(0,v.u)(Number(e.Price)*Number(e.Quantity));return(0,j.jsxs)("div",{className:"Payment__Product__item",children:[(0,j.jsxs)("div",{className:"Payment__Product__wrapper",children:[(0,j.jsx)("div",{className:"Payment__Product__img",children:(0,j.jsx)("img",{src:e.Image[0],alt:""})}),(0,j.jsxs)("div",{className:"Payment__Product__content",children:[(0,j.jsx)("h2",{children:e.NameProduct}),(0,j.jsxs)("p",{children:["S\u1ed1 l\u01b0\u1ee3ng: ",e.Quantity]})]})]}),(0,j.jsx)("div",{className:"Payment__Product__price",children:(0,j.jsxs)("p",{children:[(0,v.u)(r),"\u20ab"]})})]})}))}):(0,j.jsxs)("div",{className:"Payment__Product__404",children:[(0,j.jsx)(m.Z,{}),(0,j.jsx)("h2",{children:"R\u1ea5t ti\u1ebfc b\u1ea1n ch\u01b0a ch\u1ecdn s\u1ea3n ph\u1ea9m \u0111\u1ec3 thanh to\xe1n "}),(0,j.jsx)(x.rU,{to:"/Account/Cart",children:"C\xf9ng quay l\u1ea1i gi\u1ecf h\xe0ng nh\xe9 !"})]})}),(0,j.jsx)(l.NZ,{children:(0,j.jsxs)("div",{className:"Payment__total",children:[(0,j.jsxs)("div",{className:"Payment__total__warpper",children:[(0,j.jsx)("h2",{children:"T\u1ed5ng ti\u1ec1n"}),(0,j.jsxs)("span",{children:[(0,v.u)(T),"\u20ab"]})]}),(0,j.jsx)("div",{className:"Payment__total__button",onClick:J.handleSubmit,children:(0,j.jsx)(y.Z,{children:"Mua Ngay"})})]})})]})})]})})}},6235:function(e,r,n){n.d(r,{Cw:function(){return m},eJ:function(){return o},Nn:function(){return d},Rl:function(){return h}});var t=n(4165),s=n(5861),a=n(5171),i=n(6724),c=(n(5854),n(408),n(9342)),u=(n(6660),function(){var e=(0,s.Z)((0,t.Z)().mark((function e(r,n,s){var c,u,l;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=(0,i.hJ)(a.db,"PurchaseHistory"),e.next=3,(0,i.ET)(c,s);case 3:return u=e.sent,e.next=6,(0,i.JU)(a.db,"PurchaseHistory",u.id);case 6:return l=e.sent,e.next=9,(0,i.r7)(l,{Uid:r});case 9:case"end":return e.stop()}}),e)})));return function(r,n,t){return e.apply(this,arguments)}}()),l="User",o=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(r,n){var s,c,u,o;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.Email,c=n.firstname,u=n.lastname,o={Email:s,Address:"",Number:"",ImgUser:"https://mir-s3-cdn-cf.behance.net/project_modules/max_1200/36015793570193.5e6c1151cb04b.png",FullName:"".concat(c," ").concat(u),Birthdate:"",Role:"user"},e.next=4,(0,i.pl)((0,i.JU)(a.db,l,r),o).then((function(e){return{success:!0,payload:null}})).catch((function(e){return{success:!1,payload:e}}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),d=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(r){var n,s;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,i.JU)(a.db,l,r),e.next=3,(0,i.QT)(n);case 3:if(!(s=e.sent).exists()){e.next=8;break}return e.abrupt("return",{success:!0,payload:s.data()});case 8:return e.abrupt("return",{success:!1,payload:"No such document!"});case 9:case"end":return e.stop()}}),e)})));return function(r){return e.apply(this,arguments)}}(),h=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(r,n){var s,c,u,o,d,h,m;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=n.Email,c=n.Address,u=n.Number,o=n.ImgUser,d=n.FullName,h=n.Birthdate,console.log(s),m=(0,i.JU)(a.db,l,r),e.next=5,(0,i.r7)(m,{Email:s,Address:c,Number:u,ImgUser:o,FullName:d,Birthdate:i.EK.fromDate(new Date(h)),Role:"User"}).then((function(e){return{success:!0,payload:n}})).catch((function(e){return{success:!1,payload:e}}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})));return function(r,n){return e.apply(this,arguments)}}(),m=function(){var e=(0,s.Z)((0,t.Z)().mark((function e(r,n,s){var o,d,h,m,p,x,v,y,g,b,f,P,N,_,j,k,Z,C,w,O,U=arguments;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o=U.length>3&&void 0!==U[3]?U[3]:[{pid:"",quantity:""}],d=s.emailOrPhone,h=s.Address,m=s.Payments,p=s.Total,x=s.PriceDiscount,v=s.FullName,y={Item:o,Discount:x,Total:p,DayPurchased:(0,i.Bt)(),Address:h,Payments:m,FullName:v,Email:d},!0!==n){e.next=26;break}return g=(0,i.JU)(a.db,l,r),b=(0,i.hJ)(g,"PurchaseHistoryForUser"),e.next=8,(0,i.ET)(b,y);case 8:f=e.sent,P=0;case 10:if(!(P<o.length)){e.next=22;break}return N=(0,i.JU)(a.db,"Product",o[P].pid),e.next=14,(0,c.CR)(o[P].pid);case 14:return _=e.sent,e.next=17,(0,i.r7)(N,{Quantity:(_-o[P].quantity).toString()});case 17:return e.next=19,(0,c.cF)(o[P].pid,o[P].quantity);case 19:P++,e.next=10;break;case 22:return e.next=24,u(r,f.id,y);case 24:e.next=48;break;case 26:return j=(0,i.hJ)(a.db,"PurchaseHistory"),e.next=29,(0,i.ET)(j,y);case 29:return k=e.sent,e.next=32,(0,i.JU)(a.db,"PurchaseHistory",k.id);case 32:Z=e.sent,C=0;case 34:if(!(C<o.length)){e.next=46;break}return w=(0,i.JU)(a.db,"Product",o[C].pid),e.next=38,(0,c.CR)(o[C].pid);case 38:return O=e.sent,e.next=41,(0,i.r7)(w,{Quantity:(O-o[C].quantity).toString()});case 41:return e.next=43,(0,c.cF)(o[C].pid,o[C].quantity);case 43:C++,e.next=34;break;case 46:return e.next=48,(0,i.r7)(Z,{Uid:r});case 48:case"end":return e.stop()}}),e)})));return function(r,n,t){return e.apply(this,arguments)}}()},1613:function(e,r,n){function t(e){return e.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}function s(e){return JSON.stringify(e).slice(1,11)}n.d(r,{J:function(){return s},u:function(){return t}})}}]);
//# sourceMappingURL=483.76071e43.chunk.js.map